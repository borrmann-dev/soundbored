# Soundbored Helm Chart Values
image:
  repository: ghcr.io/borrmann-dev/soundbored
  pullPolicy: Always
  tag: "latest"

# Application port (Phoenix default)
containerPort: 4000

# Environment variables (non-sensitive)
# PHX_HOST is automatically set from ingress.hosts[0].host
env:
  PHX_SERVER: "true"
  SCHEME: "https"

# Secrets (sensitive environment variables)
# These will be created as a Kubernetes Secret
secrets:
  # Discord bot token (required)
  DISCORD_TOKEN: ""
  # Discord OAuth credentials (required for login)
  DISCORD_CLIENT_ID: ""
  DISCORD_CLIENT_SECRET: ""
  # Phoenix secret key base - generate with: openssl rand -base64 48
  SECRET_KEY_BASE: ""
  # Optional: Basic auth credentials (leave empty to disable)
  BASIC_AUTH_USERNAME: ""
  BASIC_AUTH_PASSWORD: ""

# Persistent storage for uploads and SQLite database
persistence:
  enabled: true
  size: 5Gi

ingress:
  enabled: true
  className: "nginx"
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "50m"
  hosts:
    - host: soundbored.k8s.borrmann.dev
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: soundbored-tls
      hosts:
        - soundbored.k8s.borrmann.dev
